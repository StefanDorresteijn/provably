//
   Created by Stefan on 9/16/2016.

extends ../layout

block verifier
    .onetouch-verifier
        .container
            img(src="/images/onetouch.png").center-block.img-responsive.onetouchlogo
            form.form-horizontal.verify-form
                .form-group
                    .verifier-alert.col-sm-offset-3.col-sm-7.col-xs-12
                .form-group
                    .col-sm-6.col-xs-12.col-sm-offset-3
                        input#pf_test_initial_hash.form-control(type='text', name='pf_test_initial_hash', placeholder='SHA')
                    #result_SHA.icon-verifier.col-sm-2.col-xs-2.icon-verifier
                .form-group
                    .col-sm-6.col-xs-12.col-sm-offset-3
                        input#pf_test_initial_shuffle.form-control(type='text', name='pf_test_initial_shuffle', placeholder='Initial Data')
                    #result_InitData.icon-verifier.col-sm-2.col-xs-2
                .form-group
                    .col-sm-6.col-xs-12.col-sm-offset-3
                        input#pf_test_server_seed.form-control(type='text', name='pf_test_server_seed', placeholder='Dealer Seed')
                    #result_DealerSeed.icon-verifier.col-sm-2.col-xs-2
                .form-group
                    .col-sm-6.col-xs-12.col-sm-offset-3
                        input#pf_test_client_seed.form-control(type='text', name='pf_test_client_seed', placeholder='Player Seed')
                    #result_PlayerSeed.icon-verifier.col-sm-2.col-xs-2
                .form-group
                    .col-sm-6.col-xs-12.col-sm-offset-3
                        input#pf_test_final_shuffle.form-control(type='text', name='pf_test_final_shuffle', placeholder='Final Data')
                    #result_FinalData.icon-verifier.col-sm-2.col-xs-2
                .form-group
                    .col-sm-6.col-xs-12.col-sm-offset-3
                        button.btn.btn-success.btnVerify
                            | Verify

block content
    h3 More about OneTouch

    p.site-content We allows you to actively participate in shuffling of the decks used to ensure the highest level of fairness, randomness and transparency.

    p.site-content To do this, we use a SHA-256 Provably Fair algorithm, which ensures that neither the dealer nor the player can know the order of the cards before the cards are dealt and provides you with a way of verifying that the order of the deck is not altered after you have participated in the shuffling.

    h3 How does it work?

    p.site-content
        | Our servers randomly generates a shuffled deck and provides you a summary of the deck in an encrypted form: SHA-256 hash. This is referred to simply as the “SHA”
        br
        | You are then required to enter a “Player Seed.” By default, this is populated with a random string generated by your browser but you can type anything you want instead. In other words, you can create your own randomness.

    p.site-content When you hit Deal, the deck is shuffled again based on the Player Seed you provided. This becomes known as the “Final Deck” and is dealt out.
    p.site-content When the game is over, we will reveal the Initial Deck, Dealer Seed and Final Deck. This allows you to verify the fairness of the game yourself.

    h3 Verifying Fairness
    p.site-content Using the verifier, simply copy and paste the SHA, Initial Deck, Dealer Seed, Player Seed &amp; Final Deck. Then click the Verify button.

    h3 Why does this verify fairness?
    p.site-content
        |Because of the
        a(href="https://en.wikipedia.org/wiki/Avalanche_effect", target="_blank") avalance effect
        |  of the SHA-256 Provably Fair algorithm, changing the order of the deck (even by one card) after shuffling, the hash would be completely different and result in a mismatch based on the details pasted. Accordingly the verification would fail.
    p.site-content By verifying the deck at the end of the game, you can have the confidence that the deck was not altered in any way after it was shuffled based on the randomness generated from Player Seed you provide.

    script(src='/javascripts/onetouch/crypto-js/core.js')
    script(src='/javascripts/onetouch/crypto-js/sha256.js')
    script(src='/javascripts/onetouch/mersenne-twister.js')
    script(src='/javascripts/onetouch/fisher-yates-shuffle.js')
    script(src='/javascripts/onetouch/mersenne-twister.js')
    script(src='/javascripts/onetouch/provably-fair.js')
    script(src='/javascripts/onetouch/browserDetector.js')
    script(src='/javascripts/onetouch.js')

    script.
        Init();